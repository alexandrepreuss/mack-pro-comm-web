--código usado para criar as tabelas do Banco de Dados da CommWeb

CREATE TABLE Tab_categoria (
  id INTEGER   NOT NULL ,
  nome VARCHAR(120)      ,
PRIMARY KEY(id));


CREATE TABLE Tab_usuario (
  id INTEGER   NOT NULL ,
  username VARCHAR(60)    ,
  senha VARCHAR(45)    ,
  estaLogin BOOL      ,
PRIMARY KEY(id));


CREATE TABLE Tab_membro (
  id INTEGER   NOT NULL ,
  Tab_usuario_id INTEGER   NOT NULL ,
  nome VARCHAR(120)    ,
  estado VARCHAR(20)    ,
  pais VARCHAR(20)    ,
  email VARCHAR(60)    ,
  dataNascimento DATE    ,
  Administrador BOOL      ,
PRIMARY KEY(id, Tab_usuario_id),
  FOREIGN KEY(Tab_usuario_id)
    REFERENCES Tab_usuario(id));


CREATE TABLE Tab_jogo (
  id INTEGER   NOT NULL ,
  Tab_categoria_id INTEGER   NOT NULL ,
  nome VARCHAR(60)    ,
  descricao VARCHAR(255)    ,
  url_jogo VARCHAR(120)    ,
  url_imagem VARCHAR(120)      ,
PRIMARY KEY(id, Tab_categoria_id),
  FOREIGN KEY(Tab_categoria_id)
    REFERENCES Tab_categoria(id));


CREATE TABLE Tab_avaliacao (
  id INTEGER   NOT NULL ,
  Tab_membro_id INTEGER   NOT NULL ,
  Tab_jogo_id INTEGER   NOT NULL ,
  Tab_membro_Tab_usuario_id INTEGER   NOT NULL ,
  Tab_jogo_Tab_categoria_id INTEGER   NOT NULL ,
  comentario VARCHAR(255)    ,
  data_avaliacao DATE    ,
  nota INTEGER      ,
PRIMARY KEY(id, Tab_membro_id, Tab_jogo_id, Tab_membro_Tab_usuario_id, Tab_jogo_Tab_categoria_id),
  FOREIGN KEY(Tab_membro_id, Tab_membro_Tab_usuario_id)
    REFERENCES Tab_membro(id, Tab_usuario_id),
  FOREIGN KEY(Tab_jogo_id, Tab_jogo_Tab_categoria_id)
    REFERENCES Tab_jogo(id, Tab_categoria_id));


CREATE TABLE Tab_avaliacao_util (
  id INTEGER   NOT NULL ,
  Tab_membro_id INTEGER   NOT NULL ,
  Tab_avaliacao_id INTEGER   NOT NULL ,
  Tab_membro_Tab_usuario_id INTEGER   NOT NULL ,
  Tab_avaliacao_Tab_jogo_id INTEGER   NOT NULL ,
  Tab_avaliacao_Tab_membro_id INTEGER   NOT NULL ,
  Tab_jogo_Tab_categoria_id INTEGER   NOT NULL ,
  eUtil BOOL      ,
PRIMARY KEY(id, Tab_membro_id, Tab_avaliacao_id, Tab_membro_Tab_usuario_id, Tab_avaliacao_Tab_jogo_id, Tab_avaliacao_Tab_membro_id, Tab_jogo_Tab_categoria_id),
  FOREIGN KEY(Tab_membro_id, Tab_membro_Tab_usuario_id)
    REFERENCES Tab_membro(id, Tab_usuario_id),
  FOREIGN KEY(Tab_avaliacao_id, Tab_avaliacao_Tab_membro_id, Tab_avaliacao_Tab_jogo_id, Tab_membro_Tab_usuario_id, Tab_jogo_Tab_categoria_id)
    REFERENCES Tab_avaliacao(id, Tab_membro_id, Tab_jogo_id, Tab_membro_Tab_usuario_id, Tab_jogo_Tab_categoria_id));

-- código para dropar as tabelas
DROP TABLE Tab_avaliacao_util;

DROP TABLE Tab_avaliacao;

DROP TABLE Tab_jogo;

DROP TABLE Tab_membro;

DROP TABLE Tab_usuario;

DROP TABLE Tab_categoria;

--código para INSERT nas tabelas
INSERT INTO Tab_categoria (id, nome) VALUES(1, 2);

INSERT INTO Tab_jogo (id, Tab_categoria_id, nome, descricao, url_jogo, url_imagem) VALUES(1, 2, 3, 4, 5, 6);

INSERT INTO Tab_usuario (id, username, senha, estaLogin) VALUES(1, 2, 3, 4);

INSERT INTO Tab_membro (id, Tab_usuario_id, nome, estado, pais, email, dataNascimento, Administrador) VALUES(1, 2, 3, 4, 5, 6, 7, 8);

INSERT INTO Tab_avaliacao (id, Tab_membro_id, Tab_jogo_id, Tab_membro_Tab_usuario_id, Tab_jogo_Tab_categoria_id, comentario, data_avaliacao, nota) VALUES(1, 2, 3, 4, 5, 6, 7, 8);

INSERT INTO Tab_avaliacao_util (id, Tab_membro_id, Tab_avaliacao_id, Tab_membro_Tab_usuario_id, Tab_avaliacao_Tab_jogo_id, Tab_avaliacao_Tab_membro_id, Tab_jogo_Tab_categoria_id, eUtil) VALUES(1, 2, 3, 4, 5, 6, 7, 8);
